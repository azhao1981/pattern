#!/usr/bin/env ruby
current_dir = File.dirname(__FILE__)

require current_dir + '/../lib/version'
puts "#{Pattern::HELP::WELLCOME}"
if %w(--version -v).include? ARGV.first  
  puts "pattern #{Pattern::VERSION::STRING}"
  exit(0)
end
require current_dir + '/../lib/configuration'

if %w(--set -s).include? ARGV.first
  configuration = Configuration.new
  configuration.execute(ARGV)
  exit(0)
end

if %w(--list -l).include? ARGV.first
  configuration = Configuration.new
  configuration.list
  exit(0)
end

if (ARGV.empty? || (%w(--help -h).include? ARGV.first))
  puts Pattern::HELP::STRING
  exit(0)
end

require current_dir + '/../lib/compositecode'
pattern = CompositeCode.new(Command.new(ARGV))
pattern.execute